#include <stdio.h>
#include <stdlib.h>

int main()
{
    int num, sell = 0, inven = 0, max, min, name;
    int out[5] = { 0, }, remain[5] = { 0, };
    int maxIdx = 0, minIdx = 0;
    char str[5][100] = { "\0", };
    do
    {
        printf("[쇼핑몰 관리 프로그램]\n");
        printf("원하는 메뉴를 선택하세요(1.입고,2.판매,3.개별현황,4.전체현황,5.종료): ");
        scanf("%d", &num);

        int id, n, price;
        switch (num)
        {
        case 1:
            printf("상품ID : ");
            scanf("%d", &id);
            if((id > 5)){
                printf("상품 갯수가 초과되었습니다.\n");
                continue;
            }
            printf("상품명 : ");
            scanf("%s",str[id]);
            printf("입고량 : ");
            scanf("%d",&n);
            printf("판매가격 : ");
            scanf("%d", &price);
            remain[id-1] += n;
            inven += n;
            break;
        case 2:
            do{
                printf("상품ID : ");
                scanf("%d",&id);
                if(remain[id-1] == 0){
                    printf("없는 ID입니다.\n");
                }
                else break;
            } while (1);
            
            printf("판매량: ");
            scanf("%d",&n);
            out[id-1] += n;
            sell += n;
            remain[id-1] -= n;
            break;
        case 3:
            printf("ID입력: ");
            scanf("%d",&id);
            printf("상품명: %s\n", str[id]);
            printf("가격: %d\n", price);
            printf("재고량: %d\n", remain[id-1]);
            break;
        case 4:
            printf("재고 수량 >> ");
            for(int i=0; i<5; i++) printf("%d ",remain[i]);
            printf("\n총 판매량: %d (판매율 %.2f%%)", sell, ((double)sell/inven)*100);

            for (int i = 1; i < 5; i++) {
                if (out[i] > out[maxIdx]) maxIdx = i;
                if (out[i] < out[minIdx]) minIdx = i;
            }
            printf("\n가장 많이 판매된 상품 : ID %d, 상품명: %s,판매량: %d\n", maxIdx + 1, str[maxIdx+1],out[maxIdx]);
            printf("가장 적게 판매된 상품 : ID %d, 상품명: %s,판매량: %d\n", minIdx + 1, str[minIdx+1],out[minIdx]);

            for (int i = 0; i < 5; i++) {
                if (remain[i] <= 2) {
                    printf("상품 ID %d : 상품명 : %s 재고부족(%d)\n", i + 1, str[i+1],remain[i]);
                }   
            }
            break;
        case 5:
            printf("프로그램 종료");
            break;

        
        default: printf("숫자가 잘못 입력되었습니다.\n");
            break;
        }

    } while (num != 5);

    return 0;
}

